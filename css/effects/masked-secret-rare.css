/*
  MASKED SECRET RARE EFFECT - Gold/metallic effects with sunburst patterns
  Adapted from Pokemon Cards CSS secret-rare effect with image masking
*/

/* Define sunburst color variables */
.effect-masked-secret-rare {
    --sunpillar-1: hsl(2, 100%, 73%);
    --sunpillar-2: hsl(53, 100%, 69%);
    --sunpillar-3: hsl(93, 100%, 69%);
    --sunpillar-4: hsl(176, 100%, 76%);
    --sunpillar-5: hsl(228, 100%, 74%);
    --sunpillar-6: hsl(283, 100%, 73%);
    
    --sunpillar-clr-1: var(--sunpillar-1);
    --sunpillar-clr-2: var(--sunpillar-2);
    --sunpillar-clr-3: var(--sunpillar-3);
    --sunpillar-clr-4: var(--sunpillar-4);
    --sunpillar-clr-5: var(--sunpillar-5);
    --sunpillar-clr-6: var(--sunpillar-6);
    
    --glittersize: 15px;
    --shift: 1px;
}

/* Main holographic overlay with gold/metallic effects */
.effect-masked-secret-rare .holo-overlay {
    /* Enhanced metallic background with sunburst patterns */
    background: 
        /* Glitter effects */
        radial-gradient(circle at 45% 45%, rgba(255, 215, 0, 0.8) 1px, transparent 1px),
        radial-gradient(circle at 55% 55%, rgba(255, 223, 0, 0.6) 1px, transparent 1px),
        /* Conic gradient for sunburst pattern */
        conic-gradient(
            var(--sunpillar-clr-4), 
            var(--sunpillar-clr-5),
            var(--sunpillar-clr-6), 
            var(--sunpillar-clr-1), 
            var(--sunpillar-clr-4)
        ),
        /* Radial gradient for depth */
        radial-gradient(
            farthest-corner circle at var(--pointer-x, 50%) var(--pointer-y, 50%), 
            hsla(150, 0%, 0%, 0.98) 10%, 
            hsla(0, 0%, 95%, 0.15) 90%
        );
    
    background-size: var(--glittersize) var(--glittersize), var(--glittersize) var(--glittersize), cover, cover;
    background-position: 45% 45%, 55% 55%, center center, center center;
    background-blend-mode: soft-light, hard-light, overlay;
    mix-blend-mode: color-dodge;
    filter: brightness(calc(0.4 + (var(--pointer-from-center) * 0.2))) contrast(1) saturate(2.7);
    z-index: 10;
    opacity: 0.6;
    animation: secret-rare-pulse 6s ease-in-out infinite alternate;
    
    /* Mask will be applied dynamically via JavaScript */
    -webkit-mask-image: none;
    mask-image: none;
    -webkit-mask-size: cover;
    mask-size: cover;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
}

.effect-masked-secret-rare.active .holo-overlay {
    animation: secret-rare-pulse 4s ease-in-out infinite alternate;
    opacity: 0.7;
    filter: brightness(calc(0.5 + (var(--pointer-from-center) * 0.3))) contrast(1.2) saturate(3);
}

/* Enhanced reflection layer with gold tones */
.effect-masked-secret-rare .holo-reflection {
    background: 
        /* Gold foil pattern */
        linear-gradient(45deg, hsl(46, 95%, 50%), hsl(52, 100%, 69%)),
        /* Interactive radial gradient */
        radial-gradient(
            farthest-corner circle at var(--pointer-x, 50%) var(--pointer-y, 50%), 
            hsla(10, 20%, 90%, 0.95) 10%, 
            hsl(0, 0%, 0%) 70%
        );
    
    background-size: cover, cover;
    background-position: center center, center center;
    background-blend-mode: hard-light, multiply;
    mix-blend-mode: lighten;
    filter: brightness(1.25) contrast(1.25) saturate(0.35);
    opacity: 0.5;
    z-index: 11;
    
    /* Mask will be applied dynamically via JavaScript */
    -webkit-mask-image: none;
    mask-image: none;
    -webkit-mask-size: cover;
    mask-size: cover;
    -webkit-mask-position: center;
    mask-position: center;
}

/* Sparkle layer with glitter effect */
.effect-masked-secret-rare .holo-sparkle {
    background: 
        /* Moving glitter pattern */
        radial-gradient(circle at calc(50% - ((var(--shift)*2) * var(--pointer-from-left)) + var(--shift)) calc(50% - ((var(--shift)*2) * var(--pointer-from-top)) + var(--shift)), 
            rgba(255, 215, 0, 0.8) 1px, transparent 1px);
    
    background-size: var(--glittersize) var(--glittersize);
    background-position: calc(50% - ((var(--shift)*2) * var(--pointer-from-left)) + var(--shift)) calc(50% - ((var(--shift)*2) * var(--pointer-from-top)) + var(--shift));
    filter: brightness(calc((var(--pointer-from-center)*0.6) + 0.6)) contrast(1.5);
    mix-blend-mode: overlay;
    opacity: 0.6;
    z-index: 12;
    
    /* Mask will be applied dynamically via JavaScript */
    -webkit-mask-image: none;
    mask-image: none;
}

/* Enhanced glow with gold tones */
.effect-masked-secret-rare .holo-glow {
    background: 
        radial-gradient(
            farthest-corner circle at var(--pointer-x, 50%) var(--pointer-y, 50%), 
            hsla(45, 8%, 80%, 0.3) 0%, 
            hsl(22, 15%, 12%) 180%
        );
    
    filter: brightness(1.3) contrast(1.5);
    mix-blend-mode: hard-light;
    opacity: 0.4;
    z-index: 9;
    
    /* Mask will be applied dynamically via JavaScript */
    -webkit-mask-image: none;
    mask-image: none;
}

/* Character overlay layer - shows only the character */
.effect-masked-secret-rare .character-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    z-index: 15;
    background-image: var(--card-image);
    background-size: cover;
    background-position: center;
    /* Character mask will be applied via JavaScript */
    -webkit-mask-image: none;
    mask-image: none;
    -webkit-mask-size: cover;
    mask-size: cover;
    -webkit-mask-position: center;
    mask-position: center;
}

/* Subtle character enhancement */
.effect-masked-secret-rare .character-layer {
    filter: brightness(1.05) contrast(1.05) saturate(1.1);
}

.effect-masked-secret-rare.active .character-layer {
    filter: brightness(1.1) contrast(1.1) saturate(1.15);
}

/* Disable diffraction for clean secret rare appearance */
.effect-masked-secret-rare .holo-diffraction {
    display: none;
}

/* Secret rare pulse animation */
@keyframes secret-rare-pulse {
    0%, 100% {
        transform: scale(1) rotate(0deg);
        filter: brightness(calc(0.4 + (var(--pointer-from-center) * 0.2))) contrast(1) saturate(2.7) hue-rotate(0deg);
    }
    50% {
        transform: scale(1.01) rotate(0.5deg);
        filter: brightness(calc(0.5 + (var(--pointer-from-center) * 0.3))) contrast(1.1) saturate(3) hue-rotate(5deg);
    }
}
