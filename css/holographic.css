/* Base card styles */
.card {
    position: relative;
    width: 300px;
    height: 420px;
    border-radius: 15px;
    transform-style: preserve-3d;
    /* Default values for variables */
    --pointer-x: 50%;
    --pointer-y: 50%;
    --pointer-from-center: 0;
    --pointer-from-top: 0.5;
    --pointer-from-left: 0.5;
    --rotate-x: 0deg;
    --rotate-y: 0deg;
    transition: transform 0.2s cubic-bezier(0.13, 0.53, 0.38, 0.97);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    cursor: default;
    user-select: none;
    will-change: transform;
    animation: ambient-pulse 5s ease-in-out infinite;
}

.card:hover {
    transition: all 0.05s ease;
}

.card-inner {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    overflow: hidden;
    transform-style: preserve-3d;
    backface-visibility: hidden;
    /* Use CSS variables for rotation - this will be set by JavaScript */
    transform: rotateY(var(--rotate-x)) rotateX(var(--rotate-y));
    transition: transform 0.15s cubic-bezier(0.13, 0.53, 0.38, 0.97);
    will-change: transform;
}

.card-face {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    overflow: hidden;
    backface-visibility: hidden;
}

.card-image {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 15px;
    z-index: 1;
}

/* Common holographic elements */
.holo-overlay,
.holo-sparkle,
.holo-reflection,
.holo-diffraction,
.holo-glow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.15s ease-out, background-position 0.1s ease-out;
    will-change: opacity, background-position, background-size;
}

/* Enhanced Standard Holo Effect - Base visible state */
.effect-standard .holo-overlay {
    /* Remove overlay effect by setting opacity to 0 */
    opacity: 0;
}

.effect-standard .holo-reflection {
    /* Remove reflection effect by setting opacity to 0 */
    opacity: 0;
}

.effect-standard .holo-diffraction {
    /* Remove diffraction effect by setting opacity to 0 */
    opacity: 0;
}

.effect-standard .holo-glow {
    /* Remove glow effect by setting opacity to 0 */
    opacity: 0;
}

.effect-standard .holo-sparkle {
    /* Remove sparkle effect by setting opacity to 0 */
    opacity: 0;
}

/* Make sure even active states don't show the effects */
.effect-standard.active .holo-overlay,
.effect-standard.active .holo-reflection,
.effect-standard.active .holo-diffraction,
.effect-standard.active .holo-glow,
.effect-standard.active .holo-sparkle {
    opacity: 0;
}

/* Enhanced Galaxy Holo Effect - Base visible state */
.effect-galaxy .holo-overlay {
    background: 
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.3) 10%, rgba(255, 255, 255, 0) 45%),
        radial-gradient(circle at 30% 40%, rgba(255, 215, 0, 0.2) 0%, rgba(255, 215, 0, 0) 50%),
        radial-gradient(circle at 70% 60%, rgba(148, 0, 211, 0.2) 0%, rgba(148, 0, 211, 0) 50%);
    mix-blend-mode: screen;
    z-index: 10;
    opacity: 0.15; /* Reduced opacity for the static overlay */
    will-change: background-position;
}

.effect-galaxy .holo-sparkle {
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTAgNTAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUwIDUwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3RhcntmaWxsOmN1cnJlbnRDb2xvcjt9PC9zdHlsZT48cG9seWdvbiBjbGFzcz0ic3RhciIgcG9pbnRzPSIyNSwzOC44IDE0LjYsNDQuNSAxNi42LDMyLjYgOC4yLDI0LjQgMjAuMSwyMi42IDI1LDExLjcgMjkuOSwyMi42IDQxLjgsMjQuNCAzMy40LDMyLjYgMzUuNCw0NC41ICIvPjwvc3ZnPg==');
    background-size: 5% 5%; /* Larger stars */
    background-repeat: space;
    mix-blend-mode: screen;
    z-index: 11;
    opacity: 0.35; /* Higher base opacity */
    color: #f8e17a; /* Brighter gold color instead of default gold */
    transition: color 0.3s ease;
    filter: drop-shadow(0 0 5px rgba(255, 215, 55, 0.9)); /* Stronger gold glow */
}

.effect-galaxy.active .holo-sparkle {
    opacity: 0.95; /* Higher active opacity */
    animation: twinkle 3s ease-in-out infinite alternate;
}

@keyframes twinkle {
    0% {
        filter: drop-shadow(0 0 3px rgba(255, 215, 55, 0.7));
        opacity: 0.8;
    }
    50% {
        filter: drop-shadow(0 0 8px rgba(255, 240, 100, 1));
        opacity: 1;
    }
    100% {
        filter: drop-shadow(0 0 5px rgba(255, 215, 55, 0.8));
        opacity: 0.9;
    }
}

.effect-galaxy .holo-diffraction {
    background: 
        radial-gradient(ellipse at 50% 50%, rgba(255, 215, 0, 0.2) 10%, rgba(255, 215, 0, 0) 60%),
        radial-gradient(ellipse at 70% 30%, rgba(148, 0, 211, 0.3) 5%, rgba(148, 0, 211, 0) 60%),
        radial-gradient(ellipse at 30% 70%, rgba(0, 191, 255, 0.3) 5%, rgba(0, 191, 255, 0) 60%);
    mix-blend-mode: color-dodge;
    z-index: 13;
}

.effect-galaxy .card-inner::before {
    content: '';
    position: absolute;
    width: 150%;
    height: 150%;
    top: -25%;
    left: -25%;
    background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 5%, transparent 60%);
    mix-blend-mode: screen;
    opacity: 0.05; /* Significantly reduced opacity */
    z-index: 9;
    transition: opacity 0.15s ease-out;
}

.effect-galaxy.active .card-inner::before {
    opacity: 0.2; /* Reduced opacity when active */
    animation: galaxy-rotate 14s linear infinite;
}

@keyframes galaxy-rotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* Enhanced Radial Holo Effect - Base visible state */
.effect-radial .holo-overlay {
    background: conic-gradient(
        from 0deg,
        rgba(255, 0, 0, 0.2) 0deg,
        rgba(255, 154, 0, 0.2) 36deg,
        rgba(208, 222, 33, 0.2) 72deg,
        rgba(79, 220, 74, 0.2) 108deg,
        rgba(63, 218, 216, 0.2) 144deg,
        rgba(47, 201, 226, 0.2) 180deg,
        rgba(28, 127, 238, 0.2) 216deg,
        rgba(95, 21, 242, 0.2) 252deg,
        rgba(186, 12, 248, 0.2) 288deg,
        rgba(251, 7, 217, 0.2) 324deg,
        rgba(255, 0, 0, 0.2) 360deg
    );
    mix-blend-mode: color-dodge;
    z-index: 10;
    opacity: 0.25; /* Visible but subtle when not active */
    animation: hue-rotate 8s linear infinite;
}

.effect-radial .holo-glow {
    background: radial-gradient(
        circle at 50% 50%, 
        rgba(255,255,255,0.7) 0%, 
        rgba(255,255,255,0.2) 35%, 
        rgba(255,255,255,0) 70%
    );
    mix-blend-mode: overlay;
    z-index: 14;
}

.effect-radial .holo-diffraction {
    background: repeating-conic-gradient(
        rgba(255, 255, 255, 0.05) 0deg,
        rgba(255, 255, 255, 0) 2deg,
        rgba(255, 255, 255, 0.05) 4deg
    );
    opacity: 0.3;
    mix-blend-mode: overlay;
    z-index: 13;
}

/* Enhanced Full Art Holo Effect - Base visible state */
.effect-fullart .holo-overlay {
    background: linear-gradient(
        125deg,
        rgba(255,255,255,0.2) 0%,
        rgba(255,255,255,0.05) 10%,
        rgba(255,0,0,0.07) 20%,
        rgba(255,128,0,0.07) 30%,
        rgba(255,255,0,0.07) 40%,
        rgba(0,255,0,0.07) 50%,
        rgba(0,255,255,0.07) 60%,
        rgba(0,0,255,0.07) 70%,
        rgba(255,0,255,0.07) 80%,
        rgba(255,255,255,0.05) 90%,
        rgba(255,255,255,0.2) 100%
    );
    background-size: 300% 300%;
    mix-blend-mode: color-dodge;
    z-index: 10;
    opacity: 0.25; /* Visible but subtle when not active */
    animation: fullArtShimmer 8s ease-in-out infinite alternate;
}

.effect-fullart.active .holo-overlay {
    animation: fullArtShimmer 5s ease-in-out infinite alternate;
}

@keyframes fullArtShimmer {
    0% {
        background-position: 0% 0%;
    }
    100% {
        background-position: 100% 100%;
    }
}

.effect-fullart .holo-diffraction {
    background: 
        linear-gradient(
            30deg,
            rgba(255,255,255,0.2) 0%,
            rgba(255,255,255,0) 30%,
            rgba(255,255,255,0) 70%, 
            rgba(255,255,255,0.2) 100%
        ),
        url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPgogIDxkZWZzPgogICAgPHBhdHRlcm4gaWQ9InBhdHRlcm4iIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxyZWN0IHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIwLjAyIi8+CiAgICAgIDxyZWN0IHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgeD0iMTAiIHk9IjEwIiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMDIiLz4KICAgIDwvcGF0dGVybj4KICA8L2RlZnM+CiAgPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuKSIgLz4KPC9zdmc+');
    mix-blend-mode: overlay;
    z-index: 13;
}

.effect-fullart .holo-glow {
    background: radial-gradient(
        ellipse at 50% 50%, 
        rgba(255,255,255,0.6) 0%, 
        rgba(255,255,255,0) 70%
    );
    mix-blend-mode: overlay;
    z-index: 14;
}

/* Premium Holo Effect - Base visible state */
.effect-premium .holo-overlay {
    background: 
        linear-gradient(
            115deg,
            transparent 20%,
            rgba(255, 0, 0, 0.2) 30%, 
            rgba(255, 165, 0, 0.2) 40%,
            rgba(255, 255, 0, 0.2) 50%, 
            rgba(0, 255, 0, 0.2) 60%,
            rgba(0, 0, 255, 0.2) 70%,
            rgba(139, 0, 255, 0.2) 80%,
            transparent 90%
        ),
        radial-gradient(
            circle at center,
            rgba(255, 255, 255, 0.3) 0%,
            rgba(255, 255, 255, 0) 60%
        );
    background-size: 200% 200%, 100% 100%;
    background-position: 50% 50%;
    mix-blend-mode: color-dodge;
    z-index: 10;
    opacity: 0.3; /* Visible but subtle when not active */
    animation: premium-pulse 5s ease-in-out infinite alternate;
}

.effect-premium.active .holo-overlay {
    animation: premium-pulse 5s ease-in-out infinite alternate;
}

@keyframes premium-pulse {
    0%, 100% {
        background-position: 0% 0%;
        filter: brightness(1) saturate(1);
    }
    50% {
        background-position: 100% 100%;
        filter: brightness(1.2) saturate(1.2);
    }
}

/* Removing stars from Premium Holo effect */
.effect-premium .holo-sparkle {
    display: none; /* Hide the sparkle element for premium effect */
}

.effect-premium.active .holo-sparkle {
    display: none; /* Ensure sparkles stay hidden even when active */
}

/* Cosmos Holo Effect - Inspired by Pokemon CSS */
.effect-cosmos .holo-overlay {
    background: 
        radial-gradient(
            farthest-corner circle at calc(((var(--pointer-x)) * 0.5) + 25%) calc(((var(--pointer-y)) * 0.5) + 25%),
            hsl(53, 65%, 60%) 10%,
            hsl(93, 56%, 50%) 20%,
            hsl(176, 54%, 49%) 30%,
            hsl(228, 59%, 55%) 40%,
            hsl(283, 60%, 55%) 50%,
            hsl(326, 59%, 51%) 60%,
            transparent 70%
        ),
        repeating-linear-gradient(
            82deg,
            hsl(53, 65%, 60%) 4%,
            hsl(93, 56%, 50%) 8%,
            hsl(176, 54%, 49%) 12%,
            hsl(228, 59%, 55%) 16%,
            hsl(283, 60%, 55%) 20%,
            hsl(326, 59%, 51%) 24%,
            hsl(53, 65%, 60%) 28%
        );
    background-size: 200% 200%, 400% 400%;
    mix-blend-mode: color-dodge;
    z-index: 10;
    opacity: 0.3;
    animation: cosmos-shift 12s ease-in-out infinite alternate;
}

.effect-cosmos .holo-sparkle {
    background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 255, 198, 0.3) 0%, transparent 50%);
    background-size: 60% 60%, 80% 80%, 40% 40%;
    mix-blend-mode: screen;
    z-index: 11;
    opacity: 0.4;
    animation: cosmos-stars 8s ease-in-out infinite;
}

@keyframes cosmos-shift {
    0%, 100% {
        background-position: 0% 0%, 0% 0%;
        filter: hue-rotate(0deg);
    }
    50% {
        background-position: 100% 100%, 100% 100%;
        filter: hue-rotate(90deg);
    }
}

@keyframes cosmos-stars {
    0%, 100% {
        background-position: 0% 0%, 100% 100%, 50% 50%;
        opacity: 0.4;
    }
    50% {
        background-position: 100% 100%, 0% 0%, 25% 75%;
        opacity: 0.7;
    }
}

/* Rainbow Holo Effect - Inspired by Pokemon CSS */
.effect-rainbow .holo-overlay {
    background: 
        linear-gradient(-30deg,
            hsl(0, 57%, 37%) 0%,
            hsl(40, 53%, 39%) 14%,
            hsl(90, 60%, 35%) 28%,
            hsl(180, 60%, 35%) 42%,
            hsl(210, 57%, 39%) 56%,
            hsl(280, 55%, 31%) 70%,
            hsl(320, 55%, 35%) 84%,
            hsl(0, 57%, 37%) 100%
        ),
        radial-gradient(
            circle at 50% 50%,
            rgba(255, 255, 255, 0.3) 0%,
            rgba(255, 255, 255, 0.1) 50%,
            transparent 70%
        );
    background-size: 400% 400%, 100% 100%;
    background-position: 0% 0%, center;
    mix-blend-mode: color-dodge;
    z-index: 10;
    opacity: 0.35;
    animation: rainbow-shift 6s linear infinite;
}

.effect-rainbow .holo-sparkle {
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiIHZpZXdCb3g9IjAgMCA0IDQiPjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuOSIvPjxyZWN0IHg9IjIiIHk9IjIiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuOSIvPjwvc3ZnPg==');
    background-size: 8px 8px;
    mix-blend-mode: screen;
    z-index: 11;
    opacity: 0.6;
    animation: glitter 3s ease-in-out infinite alternate;
}

@keyframes rainbow-shift {
    0% {
        background-position: 0% 0%, center;
    }
    100% {
        background-position: 100% 100%, center;
    }
}

@keyframes glitter {
    0% {
        background-position: 0% 0%;
        opacity: 0.6;
    }
    100% {
        background-position: 100% 100%;
        opacity: 0.9;
    }
}

/* Reverse Holo Effect - Inspired by Pokemon CSS */
.effect-reverse .holo-overlay {
    background: 
        radial-gradient(
            circle at var(--pointer-x) var(--pointer-y),
            rgba(255, 255, 255, 0.8) 5%,
            rgba(0, 0, 0, 0.3) 50%,
            rgba(255, 255, 255, 0.6) 80%
        ),
        linear-gradient(
            115deg,
            transparent 25%,
            rgba(255, 0, 150, 0.2) 45%,
            rgba(0, 255, 255, 0.2) 55%,
            transparent 75%
        );
    background-size: 100% 100%, 200% 200%;
    mix-blend-mode: overlay;
    z-index: 10;
    opacity: 0.4;
    animation: reverse-flow 8s ease-in-out infinite alternate;
}

@keyframes reverse-flow {
    0% {
        background-position: center, 0% 0%;
        filter: brightness(1) contrast(1.2);
    }
    100% {
        background-position: center, 100% 100%;
        filter: brightness(1.2) contrast(1);
    }
}

/* Secret Rare Effect - Inspired by Pokemon CSS */
.effect-secret .holo-overlay {
    background: 
        conic-gradient(
            from 0deg,
            hsl(45, 90%, 50%) 0deg,
            hsl(55, 90%, 60%) 60deg,
            hsl(45, 90%, 70%) 120deg,
            hsl(35, 90%, 60%) 180deg,
            hsl(45, 90%, 50%) 240deg,
            hsl(55, 90%, 40%) 300deg,
            hsl(45, 90%, 50%) 360deg
        ),
        radial-gradient(
            ellipse at center,
            rgba(255, 215, 0, 0.4) 0%,
            rgba(255, 223, 0, 0.2) 50%,
            transparent 70%
        );
    background-size: 300% 300%, 100% 100%;
    mix-blend-mode: color-dodge;
    z-index: 10;
    opacity: 0.5;
    animation: gold-shine 5s ease-in-out infinite alternate;
}

.effect-secret .holo-sparkle {
    background: 
        radial-gradient(circle at 25% 25%, rgba(255, 223, 0, 0.8) 0%, transparent 20%),
        radial-gradient(circle at 75% 75%, rgba(255, 215, 0, 0.6) 0%, transparent 20%),
        radial-gradient(circle at 50% 80%, rgba(255, 200, 0, 0.7) 0%, transparent 25%);
    background-size: 40% 40%, 60% 60%, 30% 30%;
    mix-blend-mode: screen;
    z-index: 11;
    opacity: 0.7;
    animation: gold-sparkle 4s ease-in-out infinite;
}

@keyframes gold-shine {
    0%, 100% {
        background-position: 0% 0%, center;
        filter: brightness(1) saturate(1);
    }
    50% {
        background-position: 100% 100%, center;
        filter: brightness(1.3) saturate(1.5);
    }
}

@keyframes gold-sparkle {
    0%, 100% {
        background-position: 0% 0%, 100% 100%, 50% 50%;
        opacity: 0.7;
    }
    33% {
        background-position: 100% 0%, 0% 100%, 25% 75%;
        opacity: 0.9;
    }
    66% {
        background-position: 0% 100%, 100% 0%, 75% 25%;
        opacity: 0.8;
    }
}

/* Enhanced interactive effects for new holographic types */
.effect-cosmos.active .holo-overlay,
.effect-rainbow.active .holo-overlay,
.effect-reverse.active .holo-overlay,
.effect-secret.active .holo-overlay {
    opacity: 0.8;
}

.effect-cosmos.active .holo-sparkle,
.effect-rainbow.active .holo-sparkle,
.effect-secret.active .holo-sparkle {
    opacity: 0.9;
}

/* Card info */
.card-info {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 15px;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.4) 60%, rgba(0, 0, 0, 0));
    color: white;
    z-index: 15;
    text-shadow: 0 1px 3px rgba(0,0,0,0.8);
}

.card-name {
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 5px;
}

.card-rarity {
    font-size: 0.9rem;
    color: gold;
    text-shadow: 0 0 5px rgba(255,215,0,0.7);
}

/* Interactive effects */
.card.active .holo-overlay,
.card.active .holo-reflection,
.card.active .holo-diffraction,
.card.active .holo-glow {
    opacity: 0.8; /* Increase opacity when active */
}

.effect-galaxy.active .holo-sparkle {
    opacity: 0.5; /* Increase opacity when active */
}

/* Add a subtle ambient animation to all cards */
@keyframes ambient-pulse {
    0%, 100% {
        filter: brightness(1) contrast(1);
    }
    50% {
        filter: brightness(1.05) contrast(1.03);
    }
}